import{d as ae,g as o,l as F,v as le,c as n,e as B,F as m,a,i as r,t as i,m as ne,H as _,I as k,k as b,p as A,w as P,j as ue,o as l,n as y,f as S}from"./index-BB5AZnCh.js";import{B as $,_ as oe}from"./BaseButton-zage8l4P.js";import{L as G}from"./LoadingSpinner-DWGhZI7T.js";import{A as re}from"./AvatarCreator-BBrzZCtX.js";import{b as ie,f as ce,c as de,d as ve,u as pe}from"./profileService-whAIIfdU.js";const he={class:"onboarding"},fe={key:0,class:"loading-container"},me={class:"header"},ge={class:"progress-info"},_e={class:"progress-bar"},ke={class:"step-title"},be={key:0,class:"step-content"},ye={key:1,class:"step-content"},Se={key:2,class:"step-content"},Ce={class:"chips-container centered"},we=["onClick"],xe={key:0},Ve={key:3,class:"step-content"},Le={key:4,class:"step-content"},De={class:"char-count"},Fe={key:5,class:"step-content"},ze={class:"chips-container"},Ee=["onClick"],Ie={key:0},Ue={key:6,class:"step-content"},Be={class:"semester-grid"},We=["onClick"],Me={key:7,class:"step-content"},Ne={key:0,class:"selected-count"},Oe={class:"chips-container scrollable"},je=["onClick"],Ae={key:0},Pe={key:8,class:"step-content"},$e={key:0,class:"selected-count"},Ge={class:"chips-container scrollable"},Te=["onClick"],Re={key:0},He={class:"footer"},Ze={key:1},qe={key:1},z=9,Je=ae({__name:"OnboardingView",setup(Ke){const W=ue(),u=o(1),E=o(!1),C=o(!1),w=o(""),x=o(""),v=o(null),V=o(""),g=o(""),h=o(null),p=o(null),c=o([]),d=o([]),M=o([]),I=o([]),U=o([]),T=[{value:"MALE",label:"MÃ¤nnlich"},{value:"FEMALE",label:"Weiblich"},{value:"DIVERSE",label:"Divers"}],L=o(""),D=o(""),R=F(()=>L.value?I.value.filter(s=>s.name.toLowerCase().includes(L.value.toLowerCase())):I.value),H=F(()=>D.value?U.value.filter(s=>s.name.toLowerCase().includes(D.value.toLowerCase())):U.value),N=F(()=>Math.round(u.value/z*100)),Z=F(()=>{switch(u.value){case 1:return w.value.trim().length>=2;case 2:return x.value.trim().length>0;case 3:return v.value!==null;case 4:return V.value!=="";case 5:return g.value.trim().length>0;case 6:return p.value!==null;case 7:return h.value!==null&&h.value>0;case 8:return c.value.length>0;case 9:return d.value.length>0;default:return!1}}),q=["Dein Name","Profilbild","Geschlecht","Geburtsdatum","Ãœber dich","Studiengang","Semester","FÃ¤cher","Sprachen"];function J(s){v.value===s?v.value=null:v.value=s}function K(s){p.value===s?p.value=null:p.value=s}function Q(s){const t=c.value.indexOf(s);t===-1?c.value.push(s):c.value.splice(t,1)}function O(s){return c.value.includes(s)}function X(s){const t=d.value.indexOf(s);t===-1?d.value.push(s):d.value.splice(t,1)}function j(s){return d.value.includes(s)}async function Y(){C.value=!0;try{let s={};switch(u.value){case 1:s={vorname:w.value};break;case 2:s={profilePictureUrl:x.value};break;case 3:s={gender:v.value};break;case 4:s={birthdate:V.value};break;case 5:s={bio:g.value};break;case 6:s={courseId:p.value};break;case 7:s={semester:h.value};break;case 8:s={subjectIds:c.value};break;case 9:s={languageIds:d.value};break}return await pe(s),!0}catch(s){return console.error("Fehler beim Speichern:",s),!1}finally{C.value=!1}}async function ee(){await Y()&&(u.value<z?u.value++:W.push("/app"))}function te(){u.value>1&&u.value--}async function se(){E.value=!0;try{const s=await ie();if(s.isComplete){W.push("/app");return}u.value=s.currentStep;const[t,e,f]=await Promise.all([ce(),de(),ve()]);M.value=t,I.value=e,U.value=f}catch(s){console.error("Fehler beim Laden:",s)}finally{E.value=!1}}return le(()=>{se()}),(s,t)=>(l(),n("div",he,[E.value?(l(),n("div",fe,[B(G,{size:"lg"})])):(l(),n(m,{key:1},[a("header",me,[a("div",ge,[a("span",null,"Schritt "+i(u.value)+" von "+i(z),1),a("span",null,i(N.value)+"%",1)]),a("div",_e,[a("div",{class:"progress-fill",style:ne({width:N.value+"%"})},null,4)]),a("h1",ke,i(q[u.value-1]),1)]),u.value===1?(l(),n("div",be,[t[6]||(t[6]=a("p",{class:"step-description"}," Wie heiÃŸt du? Dein Vorname wird anderen Nutzern angezeigt. ",-1)),_(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>w.value=e),type:"text",placeholder:"Dein Vorname...",class:"input",maxlength:"50"},null,512),[[k,w.value]])])):r("",!0),u.value===2?(l(),n("div",ye,[t[7]||(t[7]=a("p",{class:"step-description"}," Erstelle deinen eigenen Avatar! ",-1)),B(re,{modelValue:x.value,"onUpdate:modelValue":t[1]||(t[1]=e=>x.value=e)},null,8,["modelValue"])])):r("",!0),u.value===3?(l(),n("div",Se,[t[8]||(t[8]=a("p",{class:"step-description"}," Wie identifizierst du dich? ",-1)),a("div",Ce,[(l(),n(m,null,b(T,e=>a("button",{key:e.value,class:y(["chip",{selected:v.value===e.value}]),onClick:f=>J(e.value)},[v.value===e.value?(l(),n("span",xe,"âœ“ ")):r("",!0),S(" "+i(e.label),1)],10,we)),64))])])):r("",!0),u.value===4?(l(),n("div",Ve,[t[9]||(t[9]=a("p",{class:"step-description"}," Wann wurdest du geboren? ",-1)),_(a("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>V.value=e),type:"date",class:"input date-input",max:"2010-01-01",min:"1950-01-01"},null,512),[[k,V.value]])])):r("",!0),u.value===5?(l(),n("div",Le,[t[10]||(t[10]=a("p",{class:"step-description"}," ErzÃ¤hle anderen etwas Ã¼ber dich und was du suchst. ",-1)),_(a("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>g.value=e),placeholder:"Ich suche Lernpartner fÃ¼r...",class:"textarea",maxlength:"500",rows:"6"},null,512),[[k,g.value]]),a("p",De,i(g.value.length)+" / 500",1)])):r("",!0),u.value===6?(l(),n("div",Fe,[t[11]||(t[11]=a("p",{class:"step-description"}," WÃ¤hle deinen Studiengang aus. ",-1)),a("div",ze,[(l(!0),n(m,null,b(M.value,e=>(l(),n("button",{key:e.id,class:y(["chip",{selected:p.value===e.id}]),onClick:f=>K(e.id)},[p.value===e.id?(l(),n("span",Ie,"âœ“ ")):r("",!0),S(" "+i(e.name),1)],10,Ee))),128))])])):r("",!0),u.value===7?(l(),n("div",Ue,[t[12]||(t[12]=a("p",{class:"step-description"}," In welchem Semester bist du? ",-1)),a("div",Be,[(l(),n(m,null,b(10,e=>a("button",{key:e,class:y(["semester-chip",{selected:h.value===e}]),onClick:f=>h.value=h.value===e?null:e},i(e),11,We)),64))])])):r("",!0),u.value===8?(l(),n("div",Me,[t[13]||(t[13]=a("p",{class:"step-description"}," FÃ¼r welche FÃ¤cher suchst du Lernpartner? ",-1)),_(a("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>L.value=e),type:"text",placeholder:"ðŸ” Fach suchen...",class:"search-input"},null,512),[[k,L.value]]),c.value.length>0?(l(),n("div",Ne,i(c.value.length)+" ausgewÃ¤hlt ",1)):r("",!0),a("div",Oe,[(l(!0),n(m,null,b(R.value,e=>(l(),n("button",{key:e.id,class:y(["chip",{selected:O(e.id)}]),onClick:f=>Q(e.id)},[O(e.id)?(l(),n("span",Ae,"âœ“ ")):r("",!0),S(" "+i(e.name),1)],10,je))),128))])])):r("",!0),u.value===9?(l(),n("div",Pe,[t[14]||(t[14]=a("p",{class:"step-description"}," Welche Sprachen sprichst du? ",-1)),_(a("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>D.value=e),type:"text",placeholder:"ðŸ” Sprache suchen...",class:"search-input"},null,512),[[k,D.value]]),d.value.length>0?(l(),n("div",$e,i(d.value.length)+" ausgewÃ¤hlt ",1)):r("",!0),a("div",Ge,[(l(!0),n(m,null,b(H.value,e=>(l(),n("button",{key:e.id,class:y(["chip",{selected:j(e.id)}]),onClick:f=>X(e.id)},[j(e.id)?(l(),n("span",Re,"âœ“ ")):r("",!0),S(" "+i(e.name),1)],10,Te))),128))])])):r("",!0),a("footer",He,[u.value>1?(l(),A($,{key:0,variant:"secondary",onClick:te},{default:P(()=>[...t[15]||(t[15]=[S(" ZurÃ¼ck ",-1)])]),_:1})):(l(),n("div",Ze)),B($,{disabled:!Z.value||C.value,onClick:ee},{default:P(()=>[C.value?(l(),A(G,{key:0,size:"sm"})):(l(),n("span",qe,i(u.value===z?"Fertig":"Weiter"),1))]),_:1},8,["disabled"])])],64))]))}}),st=oe(Je,[["__scopeId","data-v-d302c86d"]]);export{st as default};
