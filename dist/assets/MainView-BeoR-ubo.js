import{d as $,c as o,F as k,k as T,a as e,n as K,o as n,l as D,m as R,i as p,t as u,u as g,h as V,p as N,T as W,e as y,q as G,w as S,f as I,s as z,g as f,v as L,x as Q,y as j,j as J,z as ee,K as te}from"./index-BB5AZnCh.js";import{_ as q,B as H}from"./BaseButton-zage8l4P.js";import{L as U}from"./LoadingSpinner-DWGhZI7T.js";import{g as se,a as ne}from"./profileService-whAIIfdU.js";import{u as X}from"./useAuth-DDk3jyBf.js";const oe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%231f1f1f'%3e%3cpath%20d='M480-60q-72-68-165-104t-195-36v-440q101%200%20194%2036.5T480-498q73-69%20166-105.5T840-640v440q-103%200-195.5%2036T480-60Zm0-104q63-47%20134-75t146-37v-276q-73%2013-143.5%2052.5T480-394q-66-66-136.5-105.5T200-552v276q75%209%20146%2037t134%2075Zm0-436q-66%200-113-47t-47-113q0-66%2047-113t113-47q66%200%20113%2047t47%20113q0%2066-47%20113t-113%2047Zm0-80q33%200%2056.5-23.5T560-760q0-33-23.5-56.5T480-840q-33%200-56.5%2023.5T400-760q0%2033%2023.5%2056.5T480-680Zm0-80Zm0%20366Z'/%3e%3c/svg%3e",ae="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%231f1f1f'%3e%3cpath%20d='m480-120-58-52q-101-91-167-157T150-447.5Q111-500%2095.5-544T80-634q0-94%2063-157t157-63q52%200%2099%2022t81%2062q34-40%2081-62t99-22q94%200%20157%2063t63%20157q0%2046-15.5%2090T810-447.5Q771-395%20705-329T538-172l-58%2052Zm0-108q96-86%20158-147.5t98-107q36-45.5%2050-81t14-70.5q0-60-40-100t-100-40q-47%200-87%2026.5T518-680h-76q-15-41-55-67.5T300-774q-60%200-100%2040t-40%20100q0%2035%2014%2070.5t50%2081q36%2045.5%2098%20107T480-228Zm0-273Z'/%3e%3c/svg%3e",ie="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%231f1f1f'%3e%3cpath%20d='M240-400h320v-80H240v80Zm0-120h480v-80H240v80Zm0-120h480v-80H240v80ZM80-80v-720q0-33%2023.5-56.5T160-880h640q33%200%2056.5%2023.5T880-800v480q0%2033-23.5%2056.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46%200v-480%20480Z'/%3e%3c/svg%3e",le="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%231f1f1f'%3e%3cpath%20d='M400-480q-66%200-113-47t-47-113q0-66%2047-113t113-47q66%200%20113%2047t47%20113q0%2066-47%20113t-113%2047ZM80-160v-112q0-33%2017-62t47-44q51-26%20115-44t141-18h14q6%200%2012%202-8%2018-13.5%2037.5T404-360h-4q-71%200-127.5%2018T180-306q-9%205-14.5%2014t-5.5%2020v32h252q6%2021%2016%2041.5t22%2038.5H80Zm560%2040-12-60q-12-5-22.5-10.5T584-204l-58%2018-40-68%2046-40q-2-14-2-26t2-26l-46-40%2040-68%2058%2018q11-8%2021.5-13.5T628-460l12-60h80l12%2060q12%205%2022.5%2011t21.5%2015l58-20%2040%2070-46%2040q2%2012%202%2025t-2%2025l46%2040-40%2068-58-18q-11%208-21.5%2013.5T732-180l-12%2060h-80Zm40-120q33%200%2056.5-23.5T760-320q0-33-23.5-56.5T680-400q-33%200-56.5%2023.5T600-320q0%2033%2023.5%2056.5T680-240ZM400-560q33%200%2056.5-23.5T480-640q0-33-23.5-56.5T400-720q-33%200-56.5%2023.5T320-640q0%2033%2023.5%2056.5T400-560Zm0-80Zm12%20400Z'/%3e%3c/svg%3e",re={class:"bottom-navigation"},ce=["onClick"],ue=["src","alt"],de=$({__name:"BottomNavigation",props:{activeTab:{}},emits:["update:activeTab"],setup(r,{emit:a}){const t=a,s=[{id:"home",label:"Home",icon:oe},{id:"likes",label:"Likes",icon:ae},{id:"matches",label:"Matches",icon:ie},{id:"profile",label:"Profil",icon:le}];function i(l){t("update:activeTab",l)}return(l,v)=>(n(),o("nav",re,[(n(),o(k,null,T(s,m=>e("button",{key:m.id,class:K(["nav-item",{active:r.activeTab===m.id}]),onClick:w=>i(m.id)},[e("img",{src:m.icon,alt:m.label,class:"icon"},null,8,ue)],10,ce)),64))]))}}),ve=q(de,[["__scopeId","data-v-235d9e96"]]),he="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='20px'%20viewBox='0%20-960%20960%20960'%20width='20px'%20fill='%23FFFFFFD9'%3e%3cpath%20d='m288-96%20144-288-288-48%20456-432h72L528-576l288%2048L360-96h-72Zm182-204%20191-180-241-41%2070-139-191%20181%20241%2040-70%20139Zm10-180Z'/%3e%3c/svg%3e";function O(r){if(!r)return null;const a=new Date(r),t=new Date;if(isNaN(a.getTime()))return null;let s=t.getFullYear()-a.getFullYear();const i=t.getMonth()-a.getMonth(),l=t.getDate()-a.getDate();return(i<0||i===0&&l<0)&&s--,s}const fe=["src","alt"],me={class:"card-content"},pe={class:"header-info"},ge={class:"user-name"},_e={class:"study-info"},ye={class:"study-info-content"},be=["src"],ke={class:"study-info-content"},we={key:0,class:"bio"},Te={key:1,class:"section"},$e={class:"chips"},qe={key:0,class:"chip more"},xe={key:2,class:"section"},Me={class:"chips"},Le={class:"action-buttons"},Ce=$({__name:"UserCard",props:{profile:{},style:{}},emits:["like","dislike","touchstart","touchmove","touchend","mousedown"],setup(r){const a=r,t=D(()=>O(a.profile.birthdate));return(s,i)=>(n(),o("article",{class:"user-card",style:R(r.style),onTouchstart:i[2]||(i[2]=l=>s.$emit("touchstart",l)),onTouchmove:i[3]||(i[3]=l=>s.$emit("touchmove",l)),onTouchend:i[4]||(i[4]=l=>s.$emit("touchend")),onMousedown:i[5]||(i[5]=l=>s.$emit("mousedown",l))},[e("img",{src:r.profile.profilePictureUrl||"/default-avatar.png",alt:r.profile.vorname,class:"profile-image"},null,8,fe),e("div",me,[e("div",pe,[e("h2",ge,u(r.profile.vorname)+", "+u(t.value),1),e("div",_e,[e("p",ye,u(r.profile.course),1),e("img",{class:"study-info-content",src:g(he)},null,8,be),e("p",ke,u(r.profile.semester)+". Semester",1)])]),r.profile.bio?(n(),o("p",we,u(r.profile.bio),1)):p("",!0),r.profile.subjects&&r.profile.subjects.length>0?(n(),o("div",Te,[i[6]||(i[6]=e("span",{class:"section-label"},"Sucht Lernpartner fÃ¼r",-1)),e("div",$e,[(n(!0),o(k,null,T(r.profile.subjects.slice(0,4),l=>(n(),o("span",{key:l.id,class:"chip"},u(l.name),1))),128)),r.profile.subjects.length>4?(n(),o("span",qe," +"+u(r.profile.subjects.length-4),1)):p("",!0)])])):p("",!0),r.profile.languages&&r.profile.languages.length>0?(n(),o("div",xe,[i[7]||(i[7]=e("span",{class:"section-label"},"Sprachen",-1)),e("div",Me,[(n(!0),o(k,null,T(r.profile.languages,l=>(n(),o("span",{key:l.id,class:"chip language"},u(l.name),1))),128))])])):p("",!0),e("div",Le,[e("button",{class:"action-btn dislike",onClick:i[0]||(i[0]=V(l=>s.$emit("dislike"),["stop"])),"aria-label":"Ablehnen"},[...i[8]||(i[8]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[e("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])]),e("button",{class:"action-btn like",onClick:i[1]||(i[1]=V(l=>s.$emit("like"),["stop"])),"aria-label":"Liken"},[...i[9]||(i[9]=[e("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)])])])])],36))}}),Ze=q(Ce,[["__scopeId","data-v-0e9bd2bc"]]),Ie={class:"message"},Pe=$({__name:"MatchPopup",props:{userName:{},visible:{type:Boolean}},emits:["close"],setup(r){return(a,t)=>(n(),N(W,{to:"body"},[y(G,{name:"popup"},{default:S(()=>[r.visible?(n(),o("div",{key:0,class:"match-overlay",onClick:t[2]||(t[2]=s=>a.$emit("close"))},[e("div",{class:"match-popup",onClick:t[1]||(t[1]=V(()=>{},["stop"]))},[t[5]||(t[5]=e("div",{class:"confetti"},"ðŸŽ‰",-1)),t[6]||(t[6]=e("h2",{class:"title"},"Es ist ein Match!",-1)),e("p",Ie,[t[3]||(t[3]=I(" Du und ",-1)),e("strong",null,u(r.userName),1),t[4]||(t[4]=I(" haben sich gegenseitig geliked! ",-1))]),e("button",{class:"close-btn",onClick:t[0]||(t[0]=s=>a.$emit("close"))}," Weiter swipen ")])])):p("",!0)]),_:1})]))}}),Se=q(Pe,[["__scopeId","data-v-c73b3868"]]);async function De(r){return(await z.post(`/api/likes/${r}`)).data}async function Ne(){return(await z.get("/api/likes/received")).data}async function Ue(){return(await z.get("/api/matches")).data}function Be(r={}){const a=f(!1),t=f({x:0,y:0}),s=f({x:0,y:0}),i=100,l=300;function v(d){d.touches[0]&&(a.value=!0,s.value={x:d.touches[0].clientX,y:d.touches[0].clientY})}function m(d){!a.value||!d.touches[0]||(t.value={x:d.touches[0].clientX-s.value.x,y:0})}function w(){a.value&&_()}function M(d){a.value=!0,s.value={x:d.clientX,y:d.clientY}}function x(d){a.value&&(t.value={x:d.clientX-s.value.x,y:0})}function c(){a.value&&_()}function _(){if(Math.abs(t.value.x)>i){const d=t.value.x>0?"right":"left";C(d)}else P()}function C(d){const b=d==="right"?1:-1;t.value={x:b*500,y:0},setTimeout(()=>{d==="right"?r.onSwipeRight?.():r.onSwipeLeft?.(),P()},l)}function P(){t.value={x:0,y:0},a.value=!1}function B(){C("left")}function E(){C("right")}function F(d,b){const h=d-b;if(h<0||h>2)return{display:"none",zIndex:0,transform:"none",opacity:0};const Z=h===0,A=`translateX(-50%) translateY(-${h*20}px) scale(${1-h*.1})`;if(Z&&a.value){const Y=t.value.x*.15;return{zIndex:10,transform:`translateX(-50%) translateX(${t.value.x}px) rotate(${Y}deg)`,transition:"none",display:"flex",opacity:1}}return{zIndex:3-h,transform:A,opacity:1,transition:"all 0.3s ease",display:"flex"}}return L(()=>{document.addEventListener("mousemove",x),document.addEventListener("mouseup",c)}),Q(()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",c)}),{isDragging:a,dragOffset:t,handleTouchStart:v,handleTouchMove:m,handleTouchEnd:w,handleMouseDown:M,swipeLeft:B,swipeRight:E,getCardStyle:F}}const Ee={class:"home-tab"},Fe={key:0,class:"center-content"},Ae={key:1,class:"center-content"},He={key:2,class:"center-content"},Ve={key:3,class:"card-stack"},ze=$({__name:"HomeTab",setup(r){const a=f([]),t=f(0),s=f(!1),i=D(()=>t.value<a.value.length),l=D(()=>a.value[t.value]),v=f(!1),m=f("");async function w(){s.value=!0;try{a.value=await se(),t.value=0}catch(b){console.error("Fehler beim Laden der Profile:",b)}finally{s.value=!1}}function M(){t.value<a.value.length&&t.value++}async function x(){const b=l.value;if(b){try{const h=await De(b.id);h?.isMatch&&h.toUserVorname&&(m.value=h.toUserVorname,v.value=!0)}catch(h){console.error("Fehler beim Liken:",h)}M()}}function c(){M()}const{handleTouchStart:_,handleTouchMove:C,handleTouchEnd:P,handleMouseDown:B,swipeLeft:E,swipeRight:F,getCardStyle:d}=Be({onSwipeLeft:c,onSwipeRight:x});return L(()=>{w()}),(b,h)=>(n(),o("div",Ee,[s.value?(n(),o("div",Fe,[y(U,{size:"lg"})])):a.value.length===0?(n(),o("div",Ae,[h[1]||(h[1]=e("p",{class:"empty-message"},"Keine Profile gefunden",-1)),e("button",{class:"reload-btn",onClick:w},"Neu laden")])):i.value?(n(),o("div",Ve,[(n(!0),o(k,null,T(a.value,(Z,A)=>(n(),N(Ze,{key:Z.id,profile:Z,style:R(g(d)(A,t.value)),onLike:g(F),onDislike:g(E),onTouchstart:g(_),onTouchmove:g(C),onTouchend:g(P),onMousedown:g(B)},null,8,["profile","style","onLike","onDislike","onTouchstart","onTouchmove","onTouchend","onMousedown"]))),128))])):(n(),o("div",He,[h[2]||(h[2]=e("p",{class:"empty-message"},"Keine weiteren Profile",-1)),e("button",{class:"reload-btn",onClick:w},"Neu laden")])),y(Se,{visible:v.value,"user-name":m.value,onClose:h[0]||(h[0]=Z=>v.value=!1)},null,8,["visible","user-name"])]))}}),Re=q(ze,[["__scopeId","data-v-9e269f21"]]),je={class:"likes-tab"},Xe={key:0,class:"center-content"},Oe={key:1,class:"center-content"},Ye={key:2,class:"likes-grid"},Ke={class:"info"},We=$({__name:"LikesTab",setup(r){const a=f([]),t=f(!1);async function s(){t.value=!0;try{a.value=await Ne()}catch(i){console.error("Fehler beim Laden der Likes:",i)}finally{t.value=!1}}return L(()=>{s()}),j(()=>{s()}),(i,l)=>(n(),o("div",je,[l[1]||(l[1]=e("h1",{class:"title"},"Deine Likes",-1)),t.value?(n(),o("div",Xe,[y(U)])):a.value.length===0?(n(),o("div",Oe,[...l[0]||(l[0]=[e("p",{class:"empty-message"},"Noch keine Likes erhalten",-1)])])):(n(),o("div",Ye,[(n(!0),o(k,null,T(a.value,v=>(n(),o("article",{key:v.id,class:"like-card"},[e("div",Ke,[e("h3",null,u(v.fromUserVorname),1),e("p",null,u(v.fromUserUsername),1)])]))),128))]))]))}}),Ge=q(We,[["__scopeId","data-v-d86eb47d"]]),Qe={class:"matches-tab"},Je={key:0,class:"center-content"},et={key:1,class:"center-content"},tt={key:2,class:"matches-list"},st=["src"],nt={class:"info"},ot=$({__name:"MatchesTab",setup(r){const a=f([]),t=f(!1);async function s(){t.value=!0;try{a.value=await Ue()}catch(i){console.error("Fehler beim Laden der Matches:",i)}finally{t.value=!1}}return L(()=>{s()}),j(()=>{s()}),(i,l)=>(n(),o("div",Qe,[l[2]||(l[2]=e("h1",{class:"title"},"Deine Matches",-1)),t.value?(n(),o("div",Je,[y(U)])):a.value.length===0?(n(),o("div",et,[...l[0]||(l[0]=[e("p",{class:"empty-message"},"Noch keine Matches",-1),e("p",{class:"hint"},"Swipe weiter, um Matches zu finden!",-1)])])):(n(),o("div",tt,[(n(!0),o(k,null,T(a.value,v=>(n(),o("article",{key:v.matchId,class:"match-card"},[e("img",{src:v.profilePictureUrl||"/default-avatar.png",class:"avatar"},null,8,st),e("div",nt,[e("h3",null,u(v.otherUserVorname),1)]),l[1]||(l[1]=e("button",{class:"message-btn"}," Nachricht ",-1))]))),128))]))]))}}),at=q(ot,[["__scopeId","data-v-848ade37"]]),it={MALE:"MÃ¤nnlich",FEMALE:"Weiblich",DIVERSE:"Divers"},lt={class:"profile-tab"},rt={key:0,class:"center-content"},ct={key:1,class:"center-content"},ut={class:"error-message"},dt={class:"profile-header"},vt=["src","alt"],ht={class:"name"},ft={class:"subtitle"},mt={class:"bio-container"},pt={key:0,class:"profile-section"},gt={class:"bio"},_t={class:"subjects-container"},yt={key:0,class:"profile-section"},bt={class:"chips-container"},kt={class:"languages-container"},wt={key:0,class:"profile-section"},Tt={class:"chips-container"},$t={class:"info-container"},qt={class:"profile-section"},xt={class:"info-list"},Mt={key:0,class:"info-item"},Lt={class:"info-value"},Ct={key:1,class:"info-item"},Zt={class:"info-value"},It={class:"profile-actions"},Pt=$({__name:"ProfileTab",setup(r){const a=J(),{logout:t}=X(),s=f(null),i=f(!1),l=f(null),v=D(()=>O(s.value?.birthdate));async function m(){i.value=!0,l.value=null;try{s.value=await ne()}catch(x){console.error("Fehler beim Laden des Profils:",x),l.value="Profil konnte nicht geladen werden"}finally{i.value=!1}}function w(){t(),a.push("/login")}function M(){a.push("/profile/edit")}return L(()=>{m()}),(x,c)=>(n(),o("div",lt,[i.value?(n(),o("div",rt,[y(U)])):l.value?(n(),o("div",ct,[e("p",ut,u(l.value),1),y(H,{onClick:m},{default:S(()=>[...c[0]||(c[0]=[I("Erneut versuchen",-1)])]),_:1})])):s.value?(n(),o(k,{key:2},[e("div",dt,[e("img",{src:s.value.profilePictureUrl||"/default-avatar.png",alt:s.value.vorname,class:"avatar"},null,8,vt),e("h1",ht,u(s.value.vorname),1),e("p",ft,u(s.value.course)+" â– "+u(s.value.semester)+". Semester",1)]),e("div",mt,[s.value.bio?(n(),o("section",pt,[c[1]||(c[1]=e("h2",{class:"section-title"},"Ãœber mich",-1)),e("p",gt,u(s.value.bio),1)])):p("",!0)]),e("div",_t,[s.value.subjects&&s.value.subjects.length>0?(n(),o("section",yt,[c[2]||(c[2]=e("h2",{class:"section-title"},"Suche Lernpartner fÃ¼r",-1)),e("div",bt,[(n(!0),o(k,null,T(s.value.subjects,_=>(n(),o("span",{key:_.id,class:"chip"},u(_.name),1))),128))])])):p("",!0)]),e("div",kt,[s.value.languages&&s.value.languages.length>0?(n(),o("section",wt,[c[3]||(c[3]=e("h2",{class:"section-title"},"Sprachen",-1)),e("div",Tt,[(n(!0),o(k,null,T(s.value.languages,_=>(n(),o("span",{key:_.id,class:"chip"},u(_.name),1))),128))])])):p("",!0)]),e("div",$t,[e("section",qt,[c[6]||(c[6]=e("h2",{class:"section-title"},"Infos",-1)),e("div",xt,[s.value.gender?(n(),o("div",Mt,[c[4]||(c[4]=e("span",{class:"info-label"},"Geschlecht",-1)),e("span",Lt,u(g(it)[s.value.gender]),1)])):p("",!0),s.value.birthdate?(n(),o("div",Ct,[c[5]||(c[5]=e("span",{class:"info-label"},"Alter",-1)),e("span",Zt,u(v.value),1)])):p("",!0)])])]),e("div",It,[y(H,{variant:"secondary","full-width":"",onClick:M},{default:S(()=>[...c[7]||(c[7]=[I(" Profil bearbeiten ",-1)])]),_:1}),y(H,{variant:"ghost","full-width":"",onClick:w},{default:S(()=>[...c[8]||(c[8]=[I(" Ausloggen ",-1)])]),_:1})])],64)):p("",!0)]))}}),St=q(Pt,[["__scopeId","data-v-55cac29e"]]),Dt={class:"main-layout"},Nt={key:0,class:"app-header"},Ut={class:"tab-content"},Bt=$({__name:"MainView",setup(r){const a=f("home"),{currentUser:t,loadCurrentUser:s}=X();L(()=>{s()});const i={home:Re,likes:Ge,matches:at,profile:St};return(l,v)=>(n(),o("div",Dt,[g(t)?(n(),o("header",Nt,[e("h1",null,"Hallo, "+u(g(t).profile.vorname)+"!",1)])):p("",!0),e("main",Ut,[(n(),N(te,null,[(n(),N(ee(i[a.value])))],1024))]),y(ve,{"active-tab":a.value,"onUpdate:activeTab":v[0]||(v[0]=m=>a.value=m)},null,8,["active-tab"])]))}}),zt=q(Bt,[["__scopeId","data-v-87913968"]]);export{zt as default};
