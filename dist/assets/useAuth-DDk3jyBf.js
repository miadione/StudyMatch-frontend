import{l as v,A as o,g as u,B as h,C as d,j as y,D as m,E as p,G as w}from"./index-BB5AZnCh.js";const e=u(null),n=u(!1),t=u(null);function L(){const s=y(),i=v(()=>o());async function c(r){n.value=!0,t.value=null;try{return await w(r),await a(),!0}catch(l){return t.value="Login fehlgeschlagen. Bitte überprüfe deine Anmeldedaten.",console.error("Login error:",l),!1}finally{n.value=!1}}async function g(r){n.value=!0,t.value=null;try{return m(),e.value=null,await p(r),!0}catch(l){return t.value="Registrierung fehlgeschlagen. Bitte versuche es erneut.",console.error("Register error:",l),!1}finally{n.value=!1}}function f(){d(),e.value=null,s.push("/login")}async function a(){if(o()&&!e.value)try{e.value=await h()}catch(r){console.error("Fehler beim Laden des Users:",r),e.value=null}}return{currentUser:e,loading:n,error:t,isLoggedIn:i,login:c,register:g,logout:f,loadCurrentUser:a}}export{L as u};
